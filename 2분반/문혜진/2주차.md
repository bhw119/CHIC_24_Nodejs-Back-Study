# Node.js 시작하기
1. 배경
- HTML
  - 직접 타이핑해 웹 페이지 수동으로 만들기에 지침(구조 바꾸기 위해선 수많은 웹페이지의 HTML 코드 수동으로 수정)
  - 웹사이트 소유자만 콘텐츠 추가 가능   
➡️ 자바스크립트에 익숙한 웹 개발자들이 새로운 컴퓨터 언어를 배우지 않고도 웹페이지 자동으로 생성하는 서버 쪽 애플리케이션 만들고 싶음   
➡️ 이 맥락을 통해 출현한 기술 = Node.js   

    
2. 자바스크립트의 변신
- 구글의 자바스크립트 성능 개선을 위해 개발한 V8 엔진 오픈소스로 공개    
➡️ V8엔진에 기반으로 라이언 달이 Node.js 만들기 시작   
➡️ 자바스크립트 ~> 웹 브라우저 제어 / Node.js ~> 자바스크립트를 이용해 컴퓨터 자체를 제어   

3. Node.js가 나온 후 웹 페이지
- Node.js 사용시 만약 우리가 1억 개의 웹 페이지가 있을 때, 수정을 원할 시 1억 개 웹 페이지 모두 수정하지 않고, 한 번에 바꾸기 가능   
➡️ Node.js 기술의 경우는 1억 개의 웹 페이지를 저장하는 것이 아닌, 사용자가 어떤 페이지를 요청할 때마다 그 순간순간 웹 페이지를 생성하기 때문
- 사용자 : 콘텐츠 읽기 뿐만 아니라 쓰기, 수정, 삭제 4가지 작업을 모두 제공 ~> 사용자들이 직접 자신의 콘텐츠를 웹에 올릴 수 있게 됨


# Node.js 웹 서버 만들기
- 웹 브라우저에 주소를 입력해 웹 서버에 요청하면 웹 서버는 요청받은 정보를 찾아 응답 해줌
- 웹 서버 : 아파치, 엔진엑스, IIS 등 (Node.js 또한 웹 서버 기능 내장하고 있어 웹 서버로 사용 가능)

1. 웹 서버 켜기
- atom에서 파일을 만든 후 터미널에 node 파일이름.js 입력
- localhost:3000에 접속해 확인
  - 3000인 이유 : 코드에서 명시한 포트 번호이기 때문에
    ```
    app.listen(3000);
    ```
  - 불편한 점 : 아무 메세지가 나오지 않아 제대로 켜졌는지 확인 힘듦

2. 웹 서버 끄기
- 터미널에서 [ctrl]+[c] 누르기

3. 요청한 파일 경로 표시하기
- 코드에 웹 브라우저가요청한 파일의 경로를 콘솔에 출력하도록하는 명령 추가
  ```
  ~
  response.writeHead(200);
  console.log(__dirname + url); ← 명령어 추가
  response.end(fs.readFileSync(__dirname + url));
  ~
  ```
4. 웹 서버 응답 코드
- response.end() : () 안의 내용을 웹 브라우저에 전달, Node.js의 기능 중 fs.readFileSync를 이용해 웹 브라우저가 요청한 파일을 읽어서 응답
  ```
  ~
  response.writeHead(200);
  console.log(__dirname + url);
  response.end('egoing : ' + url); ← 명령 수정
  ~
  ```

## 자바스크립트 - 데이터 타입
- 자바스크립트 지원 데이터 타입 : 숫자, 문자열, 논리값, 배열, 오브젝트 등
1. 숫자 데이터 타입 - Number
- 자바스크립트에서 숫자를 쓰는 방법 : 숫자 적으면 그대로 숫자로 인식
- 연산자 : 숫자 데이터 처리 방법, 숫자와 숫자 사이의 기호 ex) +,-,*,/
  - 연산자는 두 항을 대상으로 연산하므로 이항 연산자라고 함
2. 문자열 데이터 타입 - String
- 문자열 표현 : 해당 문자열을 큰 따옴표(""), 혹은 작은 따옴표('')로 묶어 표현
  - 주의) 여닫는 따옴표 종류 같게
- 문자열에서 +(덧셈) 연산자 : 두 문자열 결합
  - 피연사자가 숫자 데이터 타입의 경우 + 연산자 : 두 수 덧셈
  ➡️ 같은 연산이라도 데이터의 종류에 따라결과가 달라질 수 있음
- length 속성 : 문자열의 길이 나타내줌
```
console.long('hi welcome~!!'.length);
```   
➡️ .length 사용시 공백 포함 문자열 길이 알려줌

## 자바스크립트 - 변수
- 주석 (//) : 해석을 생략하고 실행에서 제외, 슬래시(/) 2개로 시작하는 문장이 주석 ~> 일종의 메모, 주로 코드 명세 나타낼 때 사용
- 변수 : 변할 수 있는 수 ~> 계속 다른 값으로 변경 가능   
  - cf. 상수 : 변하지 않는 수     
  - 대입 연산자의 왼족에는 반드시 변수가 와야 함
  - 변수 이름 짓기 (규칙)
    1. 변수명에는 공백을 넣을 수 없음
    2. 변수명은 문자나 밑줄(_), 달러 기호($)로 시작해야하고, 첫 글자 이후로는 문자, 숫자, 밑줄, 달러 기호만 쓸 수 있음
    3. 변수명은 대소문자를 구분
    4. 자바스크립트 예약어를 변수명으로 쓸 수 없음
  - var 키워드로 변수 선언   
  ```
  var 변수명;
  ```
  ➡️ 변수를 선언할 떄는 변수 이름 앞에 var라는 키워드를 붙이는게 좋음   
      - var는 변수를 나타내는 variable의 앞 3글자, 자바스크립트에서 변수를 선언하는 키워드   
      - var 생략해도 ok, but 생략하는 이유를 모른다면 항상 붙이는게 좋음       
        (var 키워드 입력시와 생략시 차이 : 변수의 유효범위 등)   
      - var 키워드는 해당 변수를 처음 선언할 때만 붙이고 다음에 사용할 때는 붙일 필요 X       
  - 변수 활용 : 변수 사용하는 목적은 여러 가지 有
    1. 데이터에 이름을 붙이는 이름표 역할 : 변수를 이용해 데이터에 이름을 붙이면 해당 데이터가 의미하는 바를 쉽게 알 수 O   
    ex) 편지내용글글글 <- letter라는 변수에 넣은 후 letter 변수값 출력시 편지 내용 출력   
    ➡️ 코드 읽기도 편해지고 변수 이름에서 바로 이 문자열이 편지글이라는 것도 추론 가능해짐
    2. 중복되는 코드를 줄일 수 있음
       - 좋은 프로그래밍 방법의 하나는 중복을 피하는 코드를 작성하는 것
       - 특정 데이터 반복해 사용, 어떤 의미가 있어 한꺼번에 수정하는 등 일괄적으로 제어해야 한다면 ~> 변수로 만드는 것 고려 O   
         ➡️ 가독성 good, 변숫값을 지정하는 부분만 고치면 변수값 사용 모든 곳의 값 변경되므로 매우 효율적   
         ex) name = abc, -(변경)-> name = hihi : 변수값 부분만 수정시 name 변수 사용 모든 곳이 값 새 값으로 변경 됨
    3. 문자열과 변수를 이을 때
    ```
    "문자열"+변수명+"문자열"
    ```

## 자바스크립트 - 템플릿 리터럴
- 템플릿 리터럴(template literals) / 템플릿 문자열(template string) : 자바스크립트에서 문자를 표현하는 편리한 방법
- 줄 바꿈시 : 줄바꿈하려는 곳에 \ (역슬래시) 입력   
  ➡️ 실행시 문자열이 붙어서 출력 ~> \는 코드상에서 줄 바꿈을 의미, 실행 결과에는 반영X
  ➡️ \n : 실행 결과에서 줄 바꿈, 자바스크립트가 제공하는 줄 바꿈이라는 의미의 특수 기호
  ➡️ 문자열 안에 내용과 상관 없는 특수 기호(\n) 사용하니 불편 ~> 템플릿 리터럴 사용!!
- 리터럴(literal) : 문자열 그 자체가 값을 나타내는 것
  - 문자열을 템플릿 리터럴로 표시하려면 역따옴표(`)로 묶어야 함
  - 문자열을 역따옴표로 묵어 템플릿 리터럴로 만들시 문자열 안에서 줄 바꿈이나 변숫값을 사용할 수 있음
  - 더불어 ${} 형식으로 중괄호 안에 수식을 비롯해 다른 명령을 입력할 수 있음
    ➡️ 템플릿 리터럴 이용시 문자열을 좀 더 편리히 다룰 수 있음

## Node.js - URL 이해하기
- URL 5가지 요소 
  ```
  http://openturorials.org:3000/main?id=HTML&page=12
  ```
1. http ← 프로토콜(protocol) : 사용자가 서버에 접속시 어떤 방식으로 통신할 것인지 나타내는 부분
   - HTTP(HyperText Transfer Protocol)는 웹 브라우저와 웹 서버가 서로 데이터를 주고받기 위해 만든 통신 규칙
2. openturorials.org ← 도메인 네임(domain name), 호스트(host) : 인터넷에 접속된 각각의 컴퓨터 의미, 통신 규칙 뒤에 나오는 부분
   ▲ openturorials.org ~> 어떤 특정한 인터넷에 연결된 컴퓨터를 가리키는 주소
3. 3000 ← 포트(port)번호 : 도메인 네임 뒤의 숫자
   - 한 대의 컴퓨터 안에는 여려 대의 서버가 존재 할 수 있음
   - 클라이언트가 접속했을 때 그중 어떤 서버와 통신할지가 모호해짐   
   ➡️ 접속할 때 포트 번호를 명시하면 해당 포트로 연결된 서버와 통신하게 됨
   - 접속시 포트 번호 명시해야함
4. main ← 경로(path) : 해당 컴퓨터 안에 있는 어떤 디렉터리에서 어떤 파일을 불러올 것인지 가리킴, 포트 번호 다음
5. id=HTML&page=12 ← 쿼리 스트링(query string, 질의 문자열)
   - 쿼리 스트링 사용시 웹 서버에 데이터 전달 가능
   - id=HTML&page=12 : 내가 읽고 싶은 정보는 HTML이고 12페이지이다.
   - 쿼리 스트링은 ?로 시작하고 값과 값 사이는 앰퍼샌드 기호(&)로 구분, 이름과 값은 등호(=)로 구분

## Node.js - URL로 입력된 값 사용하기
- URL에서쿼리 스트링 추출
  - url 모듈 추가
  ```
  ~
  var url = require('url');
  ~
  ```
  ▲ require : 요구하다라는 의미 ~> 애플리케이션에 url이라는 모듈이 필요하다고 Node.js에게 요구한 것
  - 모듈(module) : 같은 범주의 기능을 모아놓은 집합
  ```
  url.parse(_url, true).query)
  ```
  ▲ Node.js의 url 모듈에 들어 있는 parse 기능 사용, URL에서 쿼리 스트링을 추출해 객체로 반환, 이 객체를 queryData 변수에 담
- 요청값에 따라 다르게 응답하기
  ```
  response.end(fs.readFileSync(__dirname+_url));
  ```
  ▲ id값에 따라 사용자에게 서로 다른 웹 페이지를 보내는 기능을 구현

## Node.js -파일 읽기
- CRUD : 정보시스템의 핵심적인 메커니즘
  - C : Create, 생성
  - R : Read, 읽기
  - U : Update, 수정
  - D : Delete, 삭제   
  ➡️ 가장 중요한 것 : 생성 ~> 생성이 없다면 나머지 읽기, 갱신, 삭제 불가능     
  ➡️ 읽기 역시 생성만큼 중요, 읽지 않을 거면 생성할 이유도 없기 때문   
  ➡️ 정보를 다루려고 할 때 파일이나, 데이터베이스를 비롯해 어떤 시스템에서든 정보를 생성하고 읽는 방법을 알아야 함   
  ➡️ 생성과 읽기가 가능하면 그다음으로 수정과 삭제도 가능능
- fs 모듈 : Node.js의 fs모듈에는 파일을 다루는 여러가지 기능 포함
  ```
  var fs = require('fs'0;
  fs.readFile('sample.txt','utf8',function(err,data){
    console.log(data);
  });
  ```
  - fs.readFile : fs 모듈에 있는 기능 중 readFile 기능 사용하겠음 -> 파일 읽기 기능
 
## 자바스크립트-Boolean
- 데이터 타입
- 불리언을 활용한 연산자 : 비교 연산자
- 불리언 데이터 타입은 단 2개의 데이터로 이뤄져 있음 ➡️ 참(true)와 거짓(false) 값만 저장 가능

## 자바스크립트 - 비교 연산자
- 비교 연산자는 왼쪽에 있는 항과 오른쪽에 있는 항(피연산자)을 대상으로 값을 비교하는 이항 연산자
- 연산(비교) 결과가 참이면 true, 거짓이면 false를 돌려줌 ➡️ 어떤 값에 비교 연산자 사용시 결과는 불리언 타입으로 나옴
- == : 피연산자의 값이 서로 같은지 비교하는 연산자, 값만 같은지 비교
- >, < : 크고 작음을 비교하는 연산자
- === : 피연산자가 서로 같은지 비교, ==와 다르게 값뿐만 아니라 데이터 타입까지 같은지 비교
 
## 자바스크립트 - 제어문
- 프로그램 ➡️ 프로그램을 작성하는 사람: 프로그래머 ➡️ 명령을 순서대로 작성하는 행위를 프로그래밍
- 제어문 : 실행의 흐름을 제어해서 다르게 동작할 수 있도록 함
  - 조건문 : 공통된 부분을 실행하다 조건에 따라 다르게 실행하게 만들 때
  - 반복문 : 어떤 명령을 어떤 조건에 따라 반복해 실행하게 할 때

## 자바스크립트 - 조건문
- 제어문의 대표적인 사례
- 조건에 따라 서로 다른 코드가 동작하도록 프로그램의 실행 흐름을 제어
- if문 : 조건에 따라 명령을 실행할지 말지를 결정, 조건이 참(true)면 실행, 거짓(false)면 실행하지 ㅇ낳음
- if else문 : 둘 중 하나만 실행하게 만들기 위해 사용, else문에는 조건이 없음   
  ➡️ if문 조건이 거짓이면 무조건 실행하기 때문
  ➡️ if문의 조건이 참이면 if문에 포함된 명령을 실행하고 참이 아니면(거짓이면) else문에 포함된 명령 실행

## 자바스크립트 - 콘솔에서 입력받기
- 프로그램 : 어떤 정보를 입력하면 그걸 처리해서 결과를 출력하는 기계
  - 입력을 부르는 표현들 : 매개변수(Parameter), 인수(Argument)
    - 매개변수 : 프록램에 필요한 값을 입력받는 형식
    - 인수 : 그 형식에 맞게 실제 입력하는 값
- 프로그램은 입력(input)과 출력(output) 존재 ➡️ 입출려 (I/O)

## App - 오류 페이지와 홈페이지 구현   
- Not found 오류 구현
  -  존재하지 않는 다른 경로로 들어 왔을 때는 파일을 찾을 수 없다는 오류 메시지를 전송해야 함
     1. 사용자가 루트로 접속했는지 아닌지를 아는 것
     2. /(루트)와 다른 경로로 접속시 다르게 처리 (if else문 사용)
     3. 서버가 응답할 떄의 기능을 모아놓은 response 모듈에서 writeHead라는 응답 기능 사용   
      ```
      else {
        response.writeHead(404);
        response.end('Not found');
      ```
      ➡️ pathname이 루트가 아니면 404응답 코드와 함께 파일을 찾을 수 없다는 뜻의 Not found 메시지 표시

## 자바스크립트 - 반복문
- 반복문 : for문, while문, do~while 문 등
- while문
  ```
  while(불리언 값) {
        반복 실행해야 하는 명령문들
  }
  ```
  - if문과 비슷한 형식   
    ➡️ 명령 다음에 괄호를 적고 그 안에 불리언 값을 넣음. 이어서 중괄호 안에 반복해서 실행해야하는 명령문 넣음
  - 괄호 안의 불리언 값에 따라 중괄호 안에 작성한 명령문을 반복해 실행
  - 무한 루프 : 반복문에 갇혀 빠져나오지 못하고 계속 실행되는 현상
      - 무한 루프에 빠지면 시스템의 리소스를 많이 소비하면서 자칫 위험한 상황 초래 가능
      - 만약 개발자가 의도치 않으 무한루프의 경우 이는 심각한 오류임
      - 방지를 위해 반복 조건을 true로 고정하지 마록, 언젠가는 false로 바뀌어서 반복문 빠져나오게 설계해야 함

## 자바스크립트 - 배열
- 배열(array) : 데이터 타입 중 1개
- 프로그램을 작성하다 보면 정보(데이터)가 폭발적으로 많아지는데, 그 정보를 잘 관리하지 않으면 어떤 정보를 찾거나 삭제하는 등의 작업을 하기가 아주 어려워짐 ➡️ 배열 사용하자
- 배열 만들기 : 2가지 존재, 그중 배열 리터럴(array literal)이용하는 방법
  ```
  var arr = ['A', 'B', 'C', 'D'];
  ```
  - 대괄호([])안에 배열을 넣음, 데이터를 쉼표로 구분해서 넣음.
  - 문자열 뿐만 아니라, 숫자, 불리언 모두 데이터로 넣을 수 잇음
- 배열 값 읽기 : 배열에 저장된 값을 읽을 때는 변수처럼 이름을 이용
  ```
  var arr = ['A', 'B', 'C', 'D'];
  console.log(arr);
  ```
  - 배열 이름 출력시 배열에 담긴 데이터가 순서대로 출력 됨
  - 배열에서 특정값만 읽고 싶을 때 : 배열 이름에 대괄호를 작성하고 그 안에 인덱스(index) 명시
    - 인덱스는 배열에서 데이터를 가리키는 순서, 배열을 만들때 데이터가 저장된 순서에 따라 0부터 1씩 증가
    ```
    var arr = ['A', 'B', 'C', 'D'];
    console.log(arr[1]);
    console.log(arr[3]);
    ```
  - 배열에서 값 갱신 : 바꾸고 싶은 값이 있는 인덱스 번호를 이용해 바꿈
  ```
  var arr = ['A', 'B', 'C', 'D'];
  console.log(arr[1]);
  console.log(arr[3]);
  arr[2] = 3;
  console.log(arr);
  ```
- 배열의 크기 구하기 : length 사용
  ```
  var arr = ['A', 'B', 'C', 'D'];
  console.log(arr[1]);
  console.log(arr[3]);
  arr[2] = 3;
  console.log(arr);
  console.log(arr.length);
  ```
  - 인덱스는 0부터 세지만, lenght로 크기 확인시에는 1부터 셈
- 배열 마지막에 값 추가 : 자바스크립트의 push라는 기능 이용
  ```
  var arr = ['A', 'B', 'C', 'D'];
  console.log(arr[1]);
  console.log(arr[3]);
  arr[2] = 3;
  console.log(arr);
  arr.push('E');
  console.log(arr.length);
  ```

## 자바스크립트 - 배열과 반복문
: 배열과 반복문의 특성을 적절히 결합시 아주 유용히 사용 가능
```
var number = [1, 400, 12, 34];
var i = 0;
var total = 0;
while(i < number.length) {
    total = total + number[i];
    i = i + 1;
}
console.log(`total : ${total}`);
```
