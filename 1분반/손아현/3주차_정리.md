# [1장] 자바스크립트와 Node.js (28~)

## 1.28. Node.js - 동기와 비동기 그리고 콜백
### 1) 동기와 비동기
- 동기(synchronous) 처리 방식: 하나의 작업이 끝날 때까지 기다렸다가 다음 작업이 처리하는 방식을 처리하는 방식 **(= 직렬)**
- 비동기(asynchronous) 처리 방식: 병렬로 동시에 여러 가지 일을 처리하는 방식 **(= 병렬)**  

**➡️ Node.js는 비동기 처리 방식으로 작동 가능**

### 2) Node.js에서 비동기 처리
- `Sync`가 <u>있으면</u> **동기 처리 방식**으로 동작
- `Sync`가 <u>없으면</u> **비동기 처리 방식**으로 동작

ex) `syntax/sample.txt`에 `B`란 텍스트가 있다고 해보자
1. 동기 처리 방식 (`readFileSync.(path, option)`)
    ```javascript
    var fs = require('fs');

    console.log('A');
    var result = fs.readFileSync('syntax/sample.txt', 'utf8');
    console.log(result);
    console.log('C');
    ```
    - 매개변수에 `callback`이 존재 X
    - `readFileSync`의 결과가 `result`에 담김
    - `readFileSync` <u>처리가 완료된 이후</u>에 `console.log('C')`가 실행
    > 실행 결과: **_A - B - C_**
2. 비동기 처리 방식 (`readFile.(path, option, callback)`)
    ```javascript
    var fs = require('fs');

    console.log('A');
    fs.readFile('syntax/sample.txt', 'utf8', function(err, result) {
        console.log(result);
    });
    console.log('C');
    ```
    - 매개변수에 `callback` 존재
    - **`readFile`은 아무 결과도 반환하지 않아서 직접 콜백함수를 작성해줘야 함**
    - `readFile` <u>처리가 완료되기 전</u>에 `console.log('C')`가 실행
    > 실행 결과: **_A - C - B_**

### 3) 콜백(Callback)
: 어떤 실행문을 마치면 내부적으로 자동 호출하는 기능  
ex) 언제 끝날지 모르는 함수의 실행이 끝날 때 자동으로 특정 함수를 호출
```javascript
function slowfinc(callback) {
    callback();
}
```
- 콜백을 매개변수로 받아서 호출
- `slowfunc()` 함수를 호출할 때 `slowfunc()`가 실행된 다음에 호출할 함수를 인수로 전달

## 1.29. Node.js - 패키지 매니저와 PM2
### 1) 패키지 매니저
- **패키지:** 소프트웨어를 일컫는 여러가지 표현 중 하나
- **패키지 매니저:** 패키지를 설치, 업데이트, 삭제하는 등 관리를 돕는 프로그램  

➡️ Node.js를 설치할 때 기본적으로 설치되는 패키지 매니저는 **npm**

### 2) PM2
: Node.js로 만든 프로세스(= 동작 중인 프로그램인 `main.js`)를 관리해주는 프로그램  
- PM2는 프로그램을 감시하고 있다가 의도하지 않게 꺼지거나 소스가 변경될 때 자동으로 재시동시킴
1. pm2 설치
    ```bash
    npm install pm2 -g
    ```